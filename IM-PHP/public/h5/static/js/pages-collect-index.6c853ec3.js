(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-collect-index"],{"040f":function(t,e,n){var c=n("24fb");e=c(!1),e.push([t.i,'@charset "UTF-8";\r\n/* uview-ui 的全局uni.scss */\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.main[data-v-02320958]{padding:%?0?% %?22?%}.main .content-null[data-v-02320958]{width:100%;text-align:center}.main .nvabar .nvabar-main[data-v-02320958]{display:flex;width:100%;padding:0 %?22?% 0}.main .nvabar .nvabar-main .nvabar-main-text[data-v-02320958]{flex:1;padding:%?12?%;margin-right:%?30?%;color:#12b8f6;text-align:center}.main .nvabar .nvabar-icon[data-v-02320958]{padding-right:%?22?%}.main .collect .collect-text[data-v-02320958]{padding-top:%?16?%;text-align:center;font-size:%?16?%;color:hsla(0,0%,39.2%,.9)}.main .collect .collect-item[data-v-02320958]{width:100%;padding-left:%?22?%;align-items:center;border-bottom:solid %?1?% hsla(0,0%,78.4%,.3);box-shadow:0 %?4?% %?8?% 0 rgba(0,122,255,.2),0 %?6?% %?20?% 0 rgba(0,122,255,.19)}.main .collect .collect-item .collect-item-head[data-v-02320958]{display:flex}.main .collect .collect-item .collect-item-head .collect-item-avatar[data-v-02320958]{margin:%?15?%}.main .collect .collect-item .collect-item-head .collect-item-text[data-v-02320958]{flex:1;margin:%?28?% %?8?% %?0?%}.main .collect .collect-item .collect-item-head .collect-item-text .collect-item-text-time[data-v-02320958]{float:right;font-size:%?16?%;color:hsla(0,0%,39.2%,.9)}.main .collect .collect-item .collect-item-head .collect-item-text .collect-item-pic-collect[data-v-02320958]{padding-top:%?14?%;border-radius:%?30?%;max-width:85%;max-height:%?400?%}.main .collect .collect-item .collect-item-head .collect-item-text .collect-item-mic-collect[data-v-02320958]{min-width:%?80?%;height:35px;color:#fff;position:relative;margin:%?9?%;background:#007aff;border-radius:5px}.main .collect .collect-item .collect-item-head .collect-item-text .collect-item-mic-collect .collect-item-mic-collect-count[data-v-02320958]{display:flex;padding-left:%?12?%;padding-top:%?16?%;margin-right:%?10?%}.main .collect .collect-item .collect-item-head .collect-item-text .collect-item-mic-collect .collect-item-mic-collect-count .content-icon[data-v-02320958]{flex:1}.main .collect .collect-item .collect-item-head .collect-item-text .collect-item-mic-collect[data-v-02320958]:after{content:"";position:absolute;top:10px;left:-4px;width:8px;height:8px;-webkit-transform:rotate(45deg);transform:rotate(45deg);background-color:#007aff}',""]),t.exports=e},"06ba":function(t,e,n){"use strict";n.r(e);var c=n("2065"),i=n.n(c);for(var a in c)"default"!==a&&function(t){n.d(e,t,(function(){return c[t]}))}(a);e["default"]=i.a},"0a4c":function(t,e,n){var c=n("24fb");e=c(!1),e.push([t.i,'@charset "UTF-8";\r\n/* uview-ui 的全局uni.scss */\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.u-tips[data-v-296c3d34]{font-size:%?26?%;text-align:center;padding:%?34?% 0;line-height:1;color:#909399}.u-action-sheet-item[data-v-296c3d34]{\r\ndisplay:flex;flex-direction:row;\r\nline-height:1;justify-content:center;align-items:center;font-size:%?32?%;padding:%?34?% 0;flex-direction:column}.u-action-sheet-item__subtext[data-v-296c3d34]{font-size:%?24?%;color:#909399;margin-top:%?20?%}.u-gab[data-v-296c3d34]{height:%?12?%;background-color:#eaeaec}.u-actionsheet-cancel[data-v-296c3d34]{color:#303133}',""]),t.exports=e},2065:function(t,e,n){"use strict";n("a9e3"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var c={name:"u-action-sheet",props:{maskCloseAble:{type:Boolean,default:!0},list:{type:Array,default:function(){return[]}},tips:{type:Object,default:function(){return{text:"",color:"",fontSize:"26"}}},cancelBtn:{type:Boolean,default:!0},safeAreaInsetBottom:{type:Boolean,default:!1},value:{type:Boolean,default:!1},borderRadius:{type:[String,Number],default:0},zIndex:{type:[String,Number],default:0},cancelText:{type:String,default:"取消"}},computed:{tipsStyle:function(){var t={};return this.tips.color&&(t.color=this.tips.color),this.tips.fontSize&&(t.fontSize=this.tips.fontSize+"rpx"),t},itemStyle:function(){var t=this;return function(e){var n={};return t.list[e].color&&(n.color=t.list[e].color),t.list[e].fontSize&&(n.fontSize=t.list[e].fontSize+"rpx"),t.list[e].disabled&&(n.color="#c0c4cc"),n}},uZIndex:function(){return this.zIndex?this.zIndex:this.$u.zIndex.popup}},methods:{close:function(){this.popupClose(),this.$emit("close")},popupClose:function(){this.$emit("input",!1)},itemClick:function(t){this.list[t].disabled||(this.$emit("click",t),this.$emit("input",!1))}}};e.default=c},"31fd":function(t,e,n){"use strict";var c=n("720d"),i=n.n(c);i.a},"720d":function(t,e,n){var c=n("0a4c");"string"===typeof c&&(c=[[t.i,c,""]]),c.locals&&(t.exports=c.locals);var i=n("4f06").default;i("115f930c",c,!0,{sourceMap:!1,shadowMode:!1})},"895c":function(t,e,n){"use strict";n.r(e);var c=n("9050"),i=n("f26e");for(var a in i)"default"!==a&&function(t){n.d(e,t,(function(){return i[t]}))}(a);n("d6ec");var o,l=n("f0c5"),r=Object(l["a"])(i["default"],c["b"],c["c"],!1,null,"02320958",null,!1,c["a"],o);e["default"]=r.exports},9050:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return c}));var c={uToast:n("dbff").default,uActionSheet:n("f4cb").default,uNavbar:n("26c9").default,uIcon:n("28a2").default,uAvatar:n("d1a7").default},i=function(){var t=this,e=t.$createElement,c=t._self._c||e;return c("v-uni-view",{staticClass:"main"},[c("v-uni-view",[c("u-toast",{ref:"uToast"})],1),c("u-action-sheet",{attrs:{list:[{text:"删除",color:"#FF3300",fontSize:24}]},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.setCollect()}},model:{value:t.collectShow,callback:function(e){t.collectShow=e},expression:"collectShow"}}),c("v-uni-view",[c("u-navbar",{staticClass:"nvabar",attrs:{"is-back":!0,"is-fixed":!0}},[c("v-uni-view",{staticClass:"nvabar-main"},[c("v-uni-view",{staticClass:"nvabar-main-text"},[c("v-uni-text",[t._v("我的收藏")])],1)],1),c("u-icon",{staticClass:"nvabar-icon",attrs:{name:"list",size:"36"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.redact.apply(void 0,arguments)}}})],1)],1),0==t.collect.length?c("v-uni-view",{staticClass:"content-null"},[c("v-uni-image",{attrs:{src:n("c405")}})],1):t._e(),c("v-uni-view",{staticClass:"collect"},[t._l(t.collectList,(function(e,n){return c("v-uni-view",{key:e.id,staticClass:"collect-item",on:{touchstart:function(n){arguments[0]=n=t.$handleEvent(n),t.getTouchStartItem(e.id)},touchend:function(e){arguments[0]=e=t.$handleEvent(e),t.getTouchendItem()}}},[c("v-uni-view",{staticClass:"collect-item-head"},[c("u-avatar",{staticClass:"collect-item-avatar",attrs:{size:"120",src:e.portrait}}),c("v-uni-view",{staticClass:"collect-item-text"},[c("v-uni-view",{staticClass:"collect-item-text-name"},[t._v("发送者 : "+t._s(e.username)),c("v-uni-view",{staticClass:"collect-item-text-time"},[t._v(t._s(t.fmtTime(e.created_at)))])],1),"text"==e.collect_type?c("v-uni-view",{staticClass:"collect-item-text-collect"},[t._v(t._s(e.collect))]):t._e(),"pic"==e.collect_type?c("v-uni-view",[c("img",{staticClass:"collect-item-pic-collect",attrs:{src:e.collect}})]):t._e(),"mic"==e.collect_type?c("v-uni-view",{staticClass:"collect-item-mic-collect",style:{width:t.contentMicWidth(e.sec)},on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.playMic(e.collect)}}},[c("v-uni-view",{staticClass:"collect-item-mic-collect-count"},[c("u-icon",{staticClass:"content-icon",attrs:{name:"play-circle",size:"36"}}),e.min?c("v-uni-text",[t._v(t._s(e.min)+"′")]):t._e(),c("v-uni-text",[t._v(t._s(e.sec)+" ″")])],1)],1):t._e()],1)],1)],1)})),c("v-uni-view",{staticClass:"collect-text"},[t._v("可以在聊天中长按消息进行收藏哟!")])],2)],1)},a=[]},b7bb:function(t,e,n){"use strict";(function(t){n("4de4"),n("4e82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var c=n("e8b4"),i={data:function(){return{collect:[],collectID:"",collectShow:!1}},mounted:function(){this.getCollect()},methods:{redact:function(){this.$refs.uToast.show({title:"长按进行删除",type:"warning",position:"top"})},fmtTime:function(t){return(0,c.formattingTime)(t)},getCollect:function(){var e=this;this.$u.post("collect/getCollect",{}).then((function(n){if(200==n.status){var c=n.data.filter((function(t){if(t.portrait=e.staticUrl+t.portrait,"pic"==t.collect_type){var n=JSON.parse(t.collect);t.collect=e.staticUrl+n.path}if("mic"==t.collect_type){var c=JSON.parse(t.collect);t.collect=e.staticUrl+c.base64,t.min=c.time.min,t.sec=c.time.sec}return t}));e.collect=c,t("log",e.collect," at pages/collect/index.vue:100")}else e.$refs.uToast.show({title:data.message,type:"error",position:"bottom"})})).catch((function(n){uni.stopPullDownRefresh(),e.$refs.uToast.show({title:"服务器在开小差",type:"warning",position:"bottom"}),t("log",n," at pages/collect/index.vue:115")}))},contentMicWidth:function(t){return 120+5*t+"rpx"},playMic:function(e){t("log",e," at pages/collect/index.vue:124");var n=uni.createInnerAudioContext();n.autoplay=!0,n.src=e,n.onPlay((function(){t("log","开始播放"," at pages/collect/index.vue:129")})),n.onError((function(e){t("log",e," at pages/collect/index.vue:132")}))},getTouchStartItem:function(t){var e=this;this.setTimeoutId=setTimeout((function(){e.collectID=t,e.collectShow=!0}),1500)},getTouchendItem:function(){clearTimeout(this.setTimeoutId)},setCollect:function(){var e=this;this.$u.post("collect/delCollect",{id:this.collectID}).then((function(n){t("log",n," at pages/collect/index.vue:150"),200==n.status?(e.collect=e.collect.filter((function(t){if(t.id!=e.collectID)return t})),e.$refs.uToast.show({title:"收藏成功",type:"success",position:"bottom"})):e.$refs.uToast.show({title:data.message,type:"error",position:"bottom"})})).catch((function(n){uni.stopPullDownRefresh(),e.$refs.uToast.show({title:"服务器在开小差",type:"warning",position:"bottom"}),t("log",n," at pages/collect/index.vue:176")}))}},computed:{collectList:function(){return this.collect.sort((function(t,e){return e.created_at-t.created_at}))}}};e.default=i}).call(this,n("0de9")["log"])},c405:function(t,e,n){t.exports=n.p+"static/img/collectNull.79fcc675.png"},c4d0:function(t,e,n){var c=n("040f");"string"===typeof c&&(c=[[t.i,c,""]]),c.locals&&(t.exports=c.locals);var i=n("4f06").default;i("3282f28c",c,!0,{sourceMap:!1,shadowMode:!1})},c56b:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return c}));var c={uPopup:n("f00d").default},i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("u-popup",{attrs:{mode:"bottom","border-radius":t.borderRadius,popup:!1,maskCloseAble:t.maskCloseAble,length:"auto",safeAreaInsetBottom:t.safeAreaInsetBottom,"z-index":t.uZIndex},on:{close:function(e){arguments[0]=e=t.$handleEvent(e),t.popupClose.apply(void 0,arguments)}},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},[t.tips.text?n("v-uni-view",{staticClass:"u-tips u-border-bottom",style:[t.tipsStyle]},[t._v(t._s(t.tips.text))]):t._e(),t._l(t.list,(function(e,c){return[n("v-uni-view",{key:c+"_0",staticClass:"u-action-sheet-item u-line-1",class:[c<t.list.length-1?"u-border-bottom":""],style:[t.itemStyle(c)],attrs:{"hover-stay-time":150},on:{touchmove:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e)},click:function(e){arguments[0]=e=t.$handleEvent(e),t.itemClick(c)}}},[n("v-uni-text",[t._v(t._s(e.text))]),e.subText?n("v-uni-text",{staticClass:"u-action-sheet-item__subtext u-line-1"},[t._v(t._s(e.subText))]):t._e()],1)]})),t.cancelBtn?n("v-uni-view",{staticClass:"u-gab"}):t._e(),t.cancelBtn?n("v-uni-view",{staticClass:"u-actionsheet-cancel u-action-sheet-item",attrs:{"hover-class":"u-hover-class","hover-stay-time":150},on:{touchmove:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e)},click:function(e){arguments[0]=e=t.$handleEvent(e),t.close.apply(void 0,arguments)}}},[t._v(t._s(t.cancelText))]):t._e()],2)},a=[]},d6ec:function(t,e,n){"use strict";var c=n("c4d0"),i=n.n(c);i.a},e8b4:function(t,e,n){"use strict";function c(t){t<1e10&&(t*=1e3);var e=new Date(t),n=e.getFullYear(),c=e.getMonth(),i=e.getDate(),a=e.getHours(),o=e.getMinutes(),l=(e.getSeconds(),Date.parse(new Date),new Date),r=l.getFullYear(),s=l.getMonth(),u=l.getDate(),d=(l.getHours(),l.getMinutes(),l.getSeconds(),Math.round(new Date((new Date).toLocaleDateString()).getTime()).toString()),f=Math.round(new Date((new Date).toLocaleDateString()).getTime()-864e5).toString(),p=(Math.round(new Date((new Date).toLocaleDateString()).getTime()-1728e5).toString(),Math.round(new Date((new Date).toLocaleDateString()).getTime()-5184e5).toString()),m="";return n==r&&c==s&&i==u&&(m=a<10?o<10?"上午"+a+":0"+o:"上午"+a+":"+o:a+":"+o),d>t&&t>f&&(m="昨天"),f>t&&t>p&&(1==e.getDay()&&(m="星期一"),2==e.getDay()&&(m="星期二"),3==e.getDay()&&(m="星期三"),4==e.getDay()&&(m="星期四"),5==e.getDay()&&(m="星期五"),6==e.getDay()&&(m="星期六"),7==e.getDay()&&(m="星期天")),t<p&&(m=n+"-"+c+"-"+i),m}function i(t){if(!t)return"";function e(t){return(1==String(t).length?"0":"")+t}var n=parseInt((new Date).getTime()/1e3),c=n-t,i=new Date(1e3*n),a=new Date(1e3*t),o=a.getFullYear(),l=a.getMonth()+1,r=a.getDate(),s=a.getHours(),u=a.getMinutes();a.getSeconds();if(c<60)return"刚刚";if(c<3600)return Math.floor(c/60)+"分钟前";if(i.getFullYear()==o&&i.getMonth()+1==l&&i.getDate()==r)return"今天"+e(s)+":"+e(u);var d=new Date(1e3*(n-86400));return d.getFullYear()==o&&d.getMonth()+1==l&&d.getDate()==r?"昨天"+e(s)+":"+e(u):i.getFullYear()==o?e(l)+"月"+e(r)+"日 "+e(s)+":"+e(u):o+"年"+e(l)+"月"+e(r)+"日 "+e(s)+":"+e(u)}function a(t){var e=t.replace(/:/g,"-");e=e.replace(/ /g,"-");var n=e.split("-"),c=new Date(Date.UTC(n[0],n[1]-1,n[2],n[3]-8,n[4],n[5]));return parseInt(c.getTime()/1e3)}function o(t){var e=new Date(1e3*parseInt(t));return e.toLocaleString().replace(/年|月/g,"-").replace(/日/g," ")}n("d3b7"),n("e25e"),n("ac1f"),n("25f0"),n("5319"),n("1276"),Object.defineProperty(e,"__esModule",{value:!0}),e.formattingTime=c,e.timestampFormat=i,e.datetime_to_unix=a,e.unix_to_datetime=o},f26e:function(t,e,n){"use strict";n.r(e);var c=n("b7bb"),i=n.n(c);for(var a in c)"default"!==a&&function(t){n.d(e,t,(function(){return c[t]}))}(a);e["default"]=i.a},f4cb:function(t,e,n){"use strict";n.r(e);var c=n("c56b"),i=n("06ba");for(var a in i)"default"!==a&&function(t){n.d(e,t,(function(){return i[t]}))}(a);n("31fd");var o,l=n("f0c5"),r=Object(l["a"])(i["default"],c["b"],c["c"],!1,null,"296c3d34",null,!1,c["a"],o);e["default"]=r.exports}}]);